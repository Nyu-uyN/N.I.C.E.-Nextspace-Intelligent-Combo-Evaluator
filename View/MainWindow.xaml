<Window x:Class="N.I.C.E.___Nextspace_Intelligent_Combo_Evaluator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:N.I.C.E.___Nextspace_Intelligent_Combo_Evaluator.ViewModel"
        mc:Ignorable="d"
        Title="N.I.C.E Nextspace Intelligent Combo Evaluator" Height="1920" Width="1080">
    <Window.DataContext>
        <vm:MainViewModel />
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ========================= -->
        <!-- MAIN CONTENT -->
        <!-- ========================= -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>

            <!-- TAGS LIST -->
            <DataGrid Grid.Column="0"
                      ItemsSource="{Binding Tags}"
                      AutoGenerateColumns="False"
                      CanUserSortColumns="True"
                      IsReadOnly="False"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      SelectionMode="Extended">

                <DataGrid.Columns>

                    <DataGridCheckBoxColumn Header="Include"
                                            Binding="{Binding Include}"
                                            Width="60"/>

                    <DataGridTextColumn Header="#"
                                        Binding="{Binding Index}"
                                        Width="50"/>

                    <DataGridTextColumn Header="Name"
                                        Binding="{Binding Name}"
                                        Width="150"/>

                    <DataGridTextColumn Header="Rarity"
                                        Binding="{Binding Rarity}"
                                        Width="90"/>

                    <DataGridTextColumn Header="Categories"
                                        Binding="{Binding Categories}"
                                        Width="200"/>

                    <DataGridTextColumn Header="Controversial"
                                            Binding="{Binding IsControversial}"
                                            IsReadOnly="True"
                                            Width="120"/>

                    <DataGridTextColumn Header="Story Mission"
                                            Binding="{Binding IsStoryMission}"
                                            IsReadOnly="True"
                                            Width="120"/>

                    <DataGridTextColumn Header="Max Potential"
                                        Binding="{Binding MaxPotentialScore}"
                                        Width="140"/>

                    <!-- Description: not sortable, tooltip only -->
                    <DataGridTextColumn Header="Description"
                                        Binding="{Binding Description}"
                                        Width="*">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                <Setter Property="ToolTip"
                                        Value="{Binding Description}"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                </DataGrid.Columns>
            </DataGrid>

            <!-- FILTER & OPTIONS PANEL -->
            <ScrollViewer Grid.Column="1"
                          VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10" Orientation="Vertical">

                    <TextBlock Text="Filters"
                               FontWeight="Bold"
                               FontSize="14"
                               Margin="0,0,0,8"/>

                    <CheckBox Content="Exclude Controversial"
                              IsChecked="{Binding ExcludeControversial}"/>

                    <CheckBox Content="Exclude Story Missions"
                              IsChecked="{Binding ExcludeStoryMissions}"/>

                    <TextBlock Text="Minimum Rarity"
                               Margin="0,10,0,2"/>

                    <ComboBox SelectedIndex="{Binding MinimumRarityIndex}">
                        <ComboBoxItem Content="Common"/>
                        <ComboBoxItem Content="Uncommon"/>
                        <ComboBoxItem Content="Rare"/>
                        <ComboBoxItem Content="Epic"/>
                        <ComboBoxItem Content="Viral"/>
                    </ComboBox>

                    <Separator Margin="0,10,0,10"/>

                    <TextBlock Text="Generation Options"
                               FontWeight="Bold"
                               FontSize="14"
                               Margin="0,0,0,8"/>

                    <TextBlock Text="Combo Size (2 - 5)"/>
                    <Slider Minimum="2"
                            Maximum="5"
                            TickFrequency="1"
                            IsSnapToTickEnabled="True"
                            Value="{Binding MaxComboSize}"/>

                    <TextBlock Text="Number of Results"/>
                    <TextBox Text="{Binding NumberOfResults}"
                             Width="80"/>

                    <CheckBox Content="Top N non-reused tags"
                              IsChecked="{Binding UseDisjointTopN}"/>

                    <TextBlock Text="Minimum MaxPotentialScore"/>
                    <TextBox Text="{Binding MinMaxPotentialScore}"
                             Width="120"/>

                    <Separator Margin="0,10,0,10"/>

                    <CheckBox Content="Use Multithreading"
                              IsChecked="{Binding UseMultithreading}"/>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Threads:"
                                   VerticalAlignment="Center"/>
                        <ComboBox Width="60"
                                  SelectedItem="{Binding ThreadCount}">
                            <ComboBoxItem Content="1"/>
                            <ComboBoxItem Content="2"/>
                            <ComboBoxItem Content="4"/>
                            <ComboBoxItem Content="8"/>
                        </ComboBox>
                    </StackPanel>

                    <Separator Margin="0,10,0,10"/>

                    <StackPanel Orientation="Horizontal">
                        <Button Content="Reset Filters"
                                Command="{Binding ResetFiltersCommand}"
                                Margin="0,0,5,0"/>
                        <Button Content="Include All"
                                Command="{Binding IncludeAllCommand}"
                                Margin="0,0,5,0"/>
                        <Button Content="Exclude All"
                                Command="{Binding ExcludeAllCommand}"/>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Grid>

        <!-- ========================= -->
        <!-- COMPUTE / STATUS -->
        <!-- ========================= -->
        <Grid Grid.Row="1"
              Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Content="Compute"
                    Command="{Binding ComputeCommand}"
                    Width="120"
                    Height="40"/>

            <StackPanel Grid.Column="1"
                        Margin="10,0,0,0">
                <TextBlock Text="{Binding StatusText}"/>
                <ProgressBar Height="18"
                             IsIndeterminate="True"/>
            </StackPanel>
        </Grid>

        <!-- ========================= -->
        <!-- SEARCH -->
        <!-- ========================= -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    Margin="10">
            <TextBlock Text="Search:"
                       VerticalAlignment="Center"
                       Margin="0,0,5,0"/>
            <TextBox Width="300"
                     Text="{Binding SearchText}"/>
        </StackPanel>

    </Grid>
</Window>
